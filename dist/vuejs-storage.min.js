!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.vuejsStorage=t()}(this,function(){"use strict";function e(e){return e.replace(/\[([^[\]]*)\]/g,".$1.").split(".").filter(function(e){return""!==e})}function t(t,r,n){for(var o=e(r),i=t,a=0;a<o.length-1;a++){var s=o[a];i.hasOwnProperty(s)||(i[s]={}),i=i[s]}i[o[o.length-1]]=n}function r(r,n,o){t(r,o,function(t,r){return e(r).reduce(function(e,t){return e&&e[t]},t)}(n,o))}var n=function(){function e(e){this.storage=e}return e.prototype.set=function(e,t){this.storage.setItem(e,JSON.stringify(t))},e.prototype.get=function(e){return JSON.parse(this.storage.getItem(e))},e.prototype.has=function(e){return!!this.storage.getItem(e)},e}(),o=new n(window.localStorage),i=new n(window.sessionStorage),a=Object.freeze({default:n,localStorage:o,sessionStorage:i}),s=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];"object"!=typeof(i=t[o])||Array.isArray(i)||null===i?e[o]=t[o]:o in e?s(e[o],t[o]):e[o]=t[o]}var i;return e};function f(e,n){for(var i=n.keys,a=n.merge,f=void 0===a?s:a,u=n.namespace,c=n.driver,v=void 0===c?o:c,g={},l=0,h=i;l<h.length;l++){var p=h[l];r(g,e,p)}var d=null;if(v.has(u))d=v.get(u);else{for(var y={},m=0,w=i;m<w.length;m++){r(y,g,p=w[m])}d=y,v.set(u,d)}d=f(g,d);for(var S=function(n){r(e,d,n),e.$watch(n,{handler:function(e){t(d,n,e),v.set(u,d)},deep:!0})},b=0,O=i;b<O.length;b++){S(p=O[b])}}var u=function(e){return function(e){var t=e.keys,n=e.merge,i=void 0===n?s:n,a=e.namespace,f=e.driver,u=void 0===f?o:f;return function(e){if(u.has(a)){var n=u.get(a);e.replaceState(i(e.state,n))}else{n={};for(var o=0,s=t;o<s.length;o++){var f=s[o];r(n,e.state,f)}u.set(a,n)}e.subscribe(function(e,n){for(var o={},i=0,s=t;i<s.length;i++)r(o,n,s[i]);u.set(a,o)})}}(e)};return u.install=function(e){e.mixin({created:function(){var e=this;function t(e,t){var r={keys:[],namespace:""};for(var n in e)e.hasOwnProperty(n)&&("namespaceFactory"===n?r.namespace=e[n](t):r[n]=e[n]);return r}if("storage"in this.$options){var r=this.$options.storage;Array.isArray(r)?r.forEach(function(r){return f(e,t(r,e))}):f(this,t(r,this))}}})},u.drivers=a,u});
//# sourceMappingURL=vuejs-storage.min.js.map
